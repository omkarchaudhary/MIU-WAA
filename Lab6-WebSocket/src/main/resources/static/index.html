<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Calculator Application</title>
    <script type="text/javascript">
        var webSocket;
        function connect() {
            // Ensures only one connection is open at a time
            if(webSocket !== undefined && webSocket.readyState !== WebSocket.CLOSED){
                writeStatus("Connection is already opened.");
                return;
            }
            webSocket = new WebSocket("ws://localhost:8080/calculate");

            webSocket.onopen = function(event){
                writeStatus("Connection open")
            };
            webSocket.onclose = function(event){
                writeStatus("Connection closed");
            };
            webSocket.onmessage = function (event) {
                writeMessage(event.data);
            };
        }

        function calculate() {
            var inputValue = document.getElementById("inputValue").value.trim();
            console.log(inputValue)
            webSocket.send(inputValue)
        }

        function writeMessage(text){
            console.log("thest "+text)
            document.getElementById("outputValue").innerHTML =  text;
        }

        function writeStatus(text){
            document.getElementById("status").innerHTML =  text;
        }

        function disconnect() {
            webSocket.close();
        }

    </script>
</head>
<body>
    <h1>Calculator Application</h1>
    <div>
        <button id="connect" type="button" onclick="connect();">Connect</button>
        <button id="disconnect" type="button" onclick="disconnect();">Disconnect</button>
    </div>

    Input: <input id="inputValue" type="text"/><br/>
    <label id="outputValue"></label><br/>
    <input type="button" value="Calculate" onclick="calculate();"/>
    <br/>
    <div style="color:red" id="status"></div>
</body>
</html>